#!/bin/bash

TIMEOUT=20

# ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å‡ºåŠ›
echo "# Examples"
echo ""
echo "Examples in this directory are auto-generated by converting examples in Toma repository."
echo ""
echo "Each example is tested with a timeout of $TIMEOUT seconds."
echo "- ðŸŸ¢ OK: Compilation completed successfully."
echo "- ðŸ”´ FAIL: Runtime error or timeout."
echo ""
echo "## Results"
echo ""
echo "|file|status|"
echo "|---|---|"

# ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰å†å¸°çš„ã«.vãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢ã—ã¦å‡¦ç†
find . -name '*.v' | while read -r file; do
    if timeout $TIMEOUT coqc "$file" > /dev/null 2>&1; then
        echo "| [$file]($file) | ðŸŸ¢ OK |"
    else
        echo "| [$file]($file) | ðŸ”´ FAIL |"
    fi
done
